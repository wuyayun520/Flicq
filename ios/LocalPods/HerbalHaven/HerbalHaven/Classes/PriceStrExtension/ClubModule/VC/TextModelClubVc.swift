
//: Declare String Begin

/*: "CardCellId" :*/
fileprivate let str_segmentTitle:String = "observer else blockCar"
fileprivate let str_succeedData:[Character] = ["d","C","e","l","l","I","d"]

/*: "icon_match_dislikeBtn_nor" :*/
fileprivate let str_leadingActionData:String = "icon_text view"
fileprivate let str_appValue:String = "h_dislhidden public label source room"
fileprivate let str_canContent:String = "n_norname leading let data super"

/*: "icon_match_hiBtn_nor" :*/
fileprivate let str_displayStatisticalText:String = "else add coin trueicon_ma"
fileprivate let str_videoTagTitle:[Character] = ["t","c","h","_","h","i","B","t","n","_","n","o","r"]

/*: "icon_match_likeBtn_nor" :*/
fileprivate let str_componentMakeIfText:String = "icon_mto click time height"
fileprivate let str_timeWithValue:String = "_likeBextension control self"
fileprivate let str_messageIconName:String = "oevery"

/*: "Enable  Location" :*/
fileprivate let str_beyondOfData:String = "Enablup share in app laboratory"
fileprivate let str_viewListData:String = "catidraft"
fileprivate let str_upAddColorName:String = "move"

/*: "lng" :*/
fileprivate let str_itemTargetName:[UInt8] = [0x67,0x6e,0x6c]

/*: "lat" :*/
fileprivate let str_cutValue:[UInt8] = [0x95,0x8a,0x9d]

fileprivate func lowClass(normal num: UInt8) -> UInt8 {
    let value = Int(num) - 41
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "icon_match_bg_location" :*/
fileprivate let str_dataLabValue:[Character] = ["i","c","o","n","_","m","a","t","c","h","_","b","g","_","l","o","c","a"]
fileprivate let str_scaleName:String = "tiposition"

/*: "In order to recommend nearby people based on location, we need your permission to use location permissions" :*/
fileprivate let str_displayAllowTitle:[UInt8] = [0x17,0x30,0x7e,0x31,0x2c,0x3a,0x3b,0x2c,0x7e,0x2a,0x31,0x7e,0x2c,0x3b,0x3d,0x31,0x33,0x33,0x3b,0x30,0x3a,0x7e,0x30,0x3b,0x3f,0x2c,0x3c,0x27,0x7e,0x2e,0x3b,0x31,0x2e,0x32,0x3b,0x7e,0x3c,0x3f,0x2d,0x3b,0x3a,0x7e,0x31,0x30,0x7e,0x32,0x31,0x3d,0x3f,0x2a,0x37,0x31,0x30,0x72,0x7e,0x29,0x3b,0x7e,0x30,0x3b,0x3b,0x3a,0x7e,0x27,0x31,0x2b,0x2c,0x7e,0x2e,0x3b,0x2c,0x33,0x37,0x2d,0x2d,0x37,0x31,0x30,0x7e,0x2a,0x31,0x7e,0x2b,0x2d,0x3b,0x7e,0x32,0x31,0x3d,0x3f,0x2a,0x37,0x31,0x30,0x7e,0x2e,0x3b,0x2c,0x33,0x37,0x2d,0x2d,0x37,0x31,0x30,0x2d]

private func rawTaskFrame(index num: UInt8) -> UInt8 {
    return num ^ 94
}

/*: "&type=0" :*/
fileprivate let str_normalName:String = "commit load my action&type=0"

/*: "mf/business/list" :*/
fileprivate let str_requestText:[Character] = ["m","f","/","b","u","s","i","n","e","s","s","/","l","i","s","t"]

/*: "tab" :*/
fileprivate let str_videoRowData:[UInt8] = [0x62,0x61,0x74]

/*: "page" :*/
fileprivate let str_humanData:[UInt8] = [0xdf,0xce,0xc8,0xca]

private func makeElseInput(view num: UInt8) -> UInt8 {
    return num ^ 175
}

/*: "minAge" :*/
fileprivate let str_topHiddenData:[UInt8] = [0x65,0x67,0x41,0x6e,0x69,0x6d]

/*: "maxAge" :*/
fileprivate let str_piLogRawName:[UInt8] = [0x62,0x6e,0x77,0x4e,0x68,0x6a]

private func dataConverter(share num: UInt8) -> UInt8 {
    return num ^ 15
}

/*: "datingVideo" :*/
fileprivate let str_tingMaxText:[UInt8] = [0xe8,0xed,0xf8,0xe5,0xe2,0xeb,0xda,0xe5,0xe8,0xe9,0xe3]

private func aDelay(title num: UInt8) -> UInt8 {
    return num ^ 140
}

/*: "limitNum" :*/
fileprivate let str_bindViewName:String = "LI"
fileprivate let str_jumpData:[Character] = ["m","i","t","N","u","m"]

/*: "expire" :*/
fileprivate let str_barContent:String = "epositionpire"

/*: "Too frequent requests, please try again later" :*/
fileprivate let str_bubbleName:[UInt8] = [0x72,0x65,0x74,0x61,0x6c,0x20,0x6e,0x69,0x61,0x67,0x61,0x20,0x79,0x72,0x74,0x20,0x65,0x73,0x61,0x65,0x6c,0x70,0x20,0x2c,0x73,0x74,0x73,0x65,0x75,0x71,0x65,0x72,0x20,0x74,0x6e,0x65,0x75,0x71,0x65,0x72,0x66,0x20,0x6f,0x6f,0x54]

/*: "mf/newFeature/dislike" :*/
fileprivate let str_contentSearchName:String = "reason detail messagemf/ne"
fileprivate let str_sectionName:String = "ttexte"
fileprivate let str_nameTopData:String = "/disvar view"

/*: "uid" :*/
fileprivate let str_makeData:[UInt8] = [0xf8,0xe4,0xe9]

/*: "mf/newFeature/like" :*/
fileprivate let str_voiceValue:String = "mf/nat title self"
fileprivate let str_touchArrayValue:String = "target with social conversation asature/li"
fileprivate let str_tagName:String = "KE"

/*: "didRemoveCell forRowAtIndex =  :*/
fileprivate let str_withoutName:String = "didRby view name to self"
fileprivate let str_appPicText:String = "to mainCell fo"
fileprivate let str_tagValue:String = "rRowself error bottom"
fileprivate let str_attributeValue:String = "ex = actual value"

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  TextModelClubVc.swift
//  AbroadTalking
//
//  Created by Charlotte on 2023/5/18.
//

//: import UIKit
import UIKit

//: import JXPagingView
import JXPagingView

//: class TalkingClubVC: TalkingBaseViewController {
class TextModelClubVc: ToControllerPositionBaseRecognizerDelegate {
	var screenTipClose: Bool = true
	var nameGestureSum: Int = 53
	var videoDictionary: [AnyHashable: String] = [:]

    //: let CardCellId = "CardCellId"
    let CardCellId = (String(str_segmentTitle.suffix(3)) + String(str_succeedData))

    //: var cellItems = [SocialUserListModel]()
    var cellItems = [BillOfFareListModel]() ///  数据模型数据
    //: var currenModel = SocialUserListModel.init()
    var currenModel = BillOfFareListModel()
    //: var currenCell: TalkingClubCardItemCell?
    var currenCell: PanoplyThen?
    //: var isShowSubscre = false
    var isShowSubscre = false
    //: var clubUserData = Set<TalkingMatchRemoveRedoModel>()
    var clubUserData = Set<LiveEquatable>()

    //: override func viewWillAppear(_ animated: Bool) {
    override func viewWillAppear(_ animated: Bool) {
        //: super.viewWillAppear(animated)
        super.viewWillAppear(animated)
    }

    //: override func viewDidDisappear(_ animated: Bool) {
    override func viewDidDisappear(_ animated: Bool) {
        //: super.viewDidDisappear(animated)
        super.viewDidDisappear(animated)
    }

    //: override func viewDidLoad() {
    override func viewDidLoad() {
        //: super.viewDidLoad()
        super.viewDidLoad()
        //: self.hideNavi = true
        self.hideNavi = true
        //: checkLocationAuth()
        beyondAll()
        //: addNotifications()
        doingeHalfNotifications()
    
		if var countValue = cardView.guideView { 
	            if (countValue.frame.size.width == 34.60) && (countValue.autoresizingMask == .flexibleWidth) {
	                //: SWIFT_CUSTOM_DANGER_File_Call
	                let italianRegion = MovementView()
	            italianRegion.recapitulationOff = isShowSubscre
	            italianRegion.ownerSum = cardView.visibleCount
	            
	            italianRegion.textClose = { [self] showTitleSwitch in
	            self.screenTipClose = showTitleSwitch
	            
	            var italianRegion = cardView.isAlpha
	                italianRegion = true
	                italianRegion = !italianRegion
	            if italianRegion != self.screenTipClose {
	                self.screenTipClose = italianRegion
	            }
	            
	                self.screenTipClose = true
	                self.screenTipClose = true
	            return self.screenTipClose
	            }
	            italianRegion.fromMagnitude = { [self] digitiserCount in
	            self.nameGestureSum = digitiserCount
	            
	            var italianRegion = self.currenModel.sendQuickMsg
	                italianRegion -= 1
	                if italianRegion <= 0 {
	                    italianRegion = italianRegion + 1
	                }
	            if italianRegion < self.nameGestureSum {
	                self.nameGestureSum = italianRegion
	            }
	            
	            return self.nameGestureSum
	            }
	            italianRegion.ofDictionary = { [self] upDictionary in
	            self.videoDictionary = upDictionary
	            
	            guard var value = self.videoDictionary as? [String: String] else {
	                return nil
	            }
	            return value
	            }
	                countValue.addSubview(italianRegion)
	            }
	
		}
	}

    //: deinit {
    deinit {
        //: NotificationCenter.default.removeObserver(self)
        NotificationCenter.default.removeObserver(self)
    }

    //: private lazy var cardView: TalkingClubCardView = {
    private lazy var cardView: TerraceThen = {
        //: let height = ScreenHeight - TabBarViewHeight - StatusBarHeight - 117 - 12
        let height = kLet_dismissValue - kLet_listTagData - kLet_pathErrData - 117 - 12
        //: let view = TalkingClubCardView.init(frame: CGRect.init(x: 10, y: StatusBarHeight+12, width: ScreenWidth-20, height: height))
        let view = TerraceThen(frame: CGRect(x: 10, y: kLet_pathErrData + 12, width: kLet_itemData - 20, height: height))
        //: view.backgroundColor = .clear
        view.backgroundColor = .clear
        //: view.dataSource = self
        view.dataSource = self
        //: view.delegate = self
        view.delegate = self
        //: view.visibleCount = 10
        view.visibleCount = 10
        //: view.lineSpacing = 0.0
        view.lineSpacing = 0.0
        //: view.interitemSpacing = 0.0
        view.interitemSpacing = 0.0
        //: view.maxAngle = 0.0
        view.maxAngle = 0.0
        //: view.isAlpha = true
        view.isAlpha = true
        //: view.maxRemoveDistance = 150.0
        view.maxRemoveDistance = 150.0
        //: if LabelToReactiveCompatible.shared.direction == .rightToLeft {
        if LabelToReactiveCompatible.shared.direction == .rightToLeft {
            //: view.maxRemoveDistance = 130.0
            view.maxRemoveDistance = 130.0
        }
        //: view.layer.cornerRadius = 10.0
        view.layer.cornerRadius = 10.0
        //: view.registerClass(cellClass: TalkingClubCardItemCell.self, forellIdentifier: CardCellId)
        view.denomination(cellClass: PanoplyThen.self, forellIdentifier: CardCellId)
        //: return view
        return view
        //: }()
    }()

    //: private lazy var disLikeBtn: UIButton = {
    private lazy var disLikeBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.markTag(name: "icon_match_dislikeBtn_nor"), for: .normal)
        img.setImage(UIImage.markTag(name: (String(str_leadingActionData.prefix(5)) + "matc" + String(str_appValue.prefix(6)) + "ikeBt" + String(str_canContent.prefix(5)))), for: .normal)
        //: img.addTarget(self, action: #selector(disLikeBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(likeOf), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var hiBtn: UIButton = {
    private lazy var hiBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.markTag(name: "icon_match_hiBtn_nor"), for: .normal)
        img.setImage(UIImage.markTag(name: (String(str_displayStatisticalText.suffix(7)) + String(str_videoTagTitle))), for: .normal)
        //: img.addTarget(self, action: #selector(hiBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(contextClick), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var likeBtn: UIButton = {
    private lazy var likeBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.markTag(name: "icon_match_likeBtn_nor"), for: .normal)
        img.setImage(UIImage.markTag(name: (String(str_componentMakeIfText.prefix(6)) + "atch" + String(str_timeWithValue.prefix(6)) + "tn_n" + str_messageIconName.replacingOccurrences(of: "every", with: "r"))), for: .normal)
        //: img.addTarget(self, action: #selector(likeBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(likeAddSteamerTo), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var emptyV: SocialEmptyView = {
    private lazy var emptyV: ViewResultThen = {
        //: let v = SocialEmptyView()
        let v = ViewResultThen()
        //: return v
        return v
        //: }()
    }()

    //: private lazy var locationBtn: UIButton = {
    private lazy var locationBtn: UIButton = {
        //: let btn = UIButton.init()
        let btn = UIButton()
        //: btn.setTitle("Enable  Location".localized, for: .normal)
        btn.setTitle((String(str_beyondOfData.prefix(5)) + "e  Lo" + str_viewListData.replacingOccurrences(of: "draft", with: "o") + str_upAddColorName.replacingOccurrences(of: "move", with: "n")).localized, for: .normal)
        //: btn.titleLabel?.font = UIFont.biologyLaboratoryEqual(type: .Medium, fontSize: 17)
        btn.titleLabel?.font = UIFont.biologyLaboratoryEqual(type: .Medium, fontSize: 17)
        //: btn.setTitleColor(.white, for: .normal)
        btn.setTitleColor(.white, for: .normal)
        //: btn.layer.cornerRadius = 25
        btn.layer.cornerRadius = 25
        //: btn.clipsToBounds = true
        btn.clipsToBounds = true
        //: btn.setBackgroundImage(UIImage.imageGradientColor(colors: UIColor.appGradientColor(), size: CGSize(width: ScreenWidth-80, height: 50)), for: .normal)
        btn.setBackgroundImage(UIImage.imageSize(colors: UIColor.appColorVideo(), size: CGSize(width: kLet_itemData - 80, height: 50)), for: .normal)
        //: btn.addTarget(self, action: #selector(locationBtnClick), for: .touchUpInside)
        btn.addTarget(self, action: #selector(screenCall), for: .touchUpInside)
        //: return btn
        return btn
        //: }()
    }()

    //: private lazy var swipedFinishView: TalkingClubCardSwipedFinishView = {
    private lazy var swipedFinishView: TradingCardMediumFinishView = {
        //: let v = TalkingClubCardSwipedFinishView()
        let v = TradingCardMediumFinishView()
        //: v.countdownBlock = { [weak self] in
        v.countdownBlock = { [weak self] in
            //: guard let self = self else { return }
            guard let self = self else { return }
            //: self.beginRequestData()
            self.occupationCollection()
        }
        //: view.addSubview(v)
        view.addSubview(v)
        //: v.snp.makeConstraints { make in
        v.snp.makeConstraints { make in
            //: make.edges.equalToSuperview()
            make.edges.equalToSuperview()
        }
        //: return v
        return v
        //: }()
    }()
}

// MARK: - 定位权限监听

//: extension TalkingClubVC {
extension TextModelClubVc {
    //: func checkLocationAuth() {
    func beyondAll() {
        //: TalkingLocationManager.shared().requestLocationAuthorizaiton()
        UserManagerDelegate.scienceLab().scrubAuthorizaiton()
        //: TalkingLocationManager.shared().getAuthBlock { [weak self] (type: PermissionType) in
        UserManagerDelegate.scienceLab().sharedBlock { [weak self] (type: LocationMirrorPath) in
            //: guard let self = self else {return}
            guard let self = self else { return }
            //: switch type {
            switch type {
            //: case .firstEntry:
            case .firstEntry: // 首次进入
                //: self.refreshViewStatus()
                self.innerGesture()

            //: case .userRestricted:
            case .userRestricted: // 拒绝
                //: self.refreshViewStatus()
                self.innerGesture()
                // 展示设置弹窗
                //: self.showSettingsAlertView()
                self.settingsView()

            //: case .alwaysAllowed:
            case .alwaysAllowed: // 允许
                //: self.setupView()
                self.videoWill()
                //: self.beginRequestData()
                self.occupationCollection()
            }
        }
        /// 上报经纬度
        //: TalkingLocationManager.shared().getLocationBlock { success, latitude, longitude in
        UserManagerDelegate.scienceLab().anvilButton { success, latitude, longitude in
            //: if success {
            if success {
                //: SocialRequestManager.req_uploadPosition(params: ["lng": longitude, "lat": latitude]) { succeed, result, errorModel in
                SinceRequestManager.uploadBottom(params: [String(bytes: str_itemTargetName.reversed(), encoding: .utf8)!: longitude, String(bytes: str_cutValue.map{lowClass(normal: $0)}, encoding: .utf8)!: latitude]) { _, _, _ in
                }
            }
        }
    }

    /// 设置弹窗
    //: func showSettingsAlertView() {
    func settingsView() {
        //: guard TalkingLocationManager.shared().locationType == .userRestricted else {
        guard UserManagerDelegate.scienceLab().locationType == .userRestricted else {
            //: return
            return
        }
        //: self.view.addSubview(locationBtn)
        self.view.addSubview(locationBtn)
        //: locationBtn.snp.makeConstraints { make in
        locationBtn.snp.makeConstraints { make in
            //: make.bottom.equalToSuperview().offset(-33)
            make.bottom.equalToSuperview().offset(-33)
            //: make.leading.equalTo(40)
            make.leading.equalTo(40)
            //: make.trailing.equalTo(-40)
            make.trailing.equalTo(-40)
            //: make.height.equalTo(50)
            make.height.equalTo(50)
        }
    }

    /// 刷新视图状态
    //: private func refreshViewStatus() {
    private func innerGesture() {
        // 是否开启定位判断缺省图
        //: if TalkingLocationManager.shared().locationType != .alwaysAllowed {
        if UserManagerDelegate.scienceLab().locationType != .alwaysAllowed {
            //: self.view.removeAllSubviews()
            self.view.removeAllSubviews()
            //: self.view.addSubview(emptyV)
            self.view.addSubview(emptyV)
            //: emptyV.snp.makeConstraints { make in
            emptyV.snp.makeConstraints { make in
                //: make.top.equalToSuperview().offset(200)
                make.top.equalToSuperview().offset(200)
                //: make.leading.trailing.bottom.equalToSuperview()
                make.leading.trailing.bottom.equalToSuperview()
            }
            //: emptyV.imgV.image = UIImage.markTag(name: "icon_match_bg_location")
            emptyV.imgV.image = UIImage.markTag(name: (String(str_dataLabValue) + str_scaleName.replacingOccurrences(of: "position", with: "on")))
            //: emptyV.desLab.text = "In order to recommend nearby people based on location, we need your permission to use location permissions".localized
            emptyV.desLab.text = String(bytes: str_displayAllowTitle.map{rawTaskFrame(index: $0)}, encoding: .utf8)!.localized
        }
    }

    //: @objc private func locationBtnClick() {
    @objc private func screenCall() {
        //: let url = URL(string: UIApplication.openSettingsURLString)
        let url = URL(string: UIApplication.openSettingsURLString)
        //: if let url = url, UIApplication.shared.canOpenURL(url) {
        if let url = url, UIApplication.shared.canOpenURL(url) {
            //: UIApplication.shared.open(url, options: [:], completionHandler: nil)
            UIApplication.shared.open(url, options: [:], completionHandler: nil)
        }
    }
}

//: extension TalkingClubVC {
extension TextModelClubVc {
    //: @objc private func disLikeBtnClick() {
    @objc private func likeOf() {
        // 埋点
        //: uploadRecord.uploadRecordEvent(eventID: click_home_dislike, toUid: "\(self.currenModel.uid)")
        kLet_netTitle.currentIn(eventID: kLet_turnData, toUid: "\(self.currenModel.uid)")
        /// 最后一条时，无法滑动
        //: if isShowSubscre {
        if isShowSubscre {
            //: cardView.restoreCellLocation()
            cardView.carte()
            //: EnvelopeSinceAdministratorThen.share.func__pushToSubscribeAlert(appendParams: "&type=0")
            EnvelopeSinceAdministratorThen.share.dismissBy(appendParams: (String(str_normalName.suffix(7))))
            //: return
            return
        }
        //: disLikeReq()
        adOn()
//        if !cardView.isUserInteractionEnabled && cellItems.count == 1 {
//            self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
//            disLikeReq()
//            return
//        }

        //: cardView.removeTopCardViewFromSwipe(direction: .Left)
        cardView.anyEqualStart(direction: .Left)
    }

    //: @objc private func hiBtnClick() {
    @objc private func contextClick() {
        //: let uid = self.currenModel.uid
        let uid = self.currenModel.uid
        //: if uid > 0 {
        if uid > 0 {
            //: EnvelopeSinceAdministratorThen.share.func__pushToPriveteChatVC(chatID: "\(uid)")
            EnvelopeSinceAdministratorThen.share.hiddenCompletion(chatID: "\(uid)")
            // 埋点
            //: uploadRecord.uploadRecordEvent(eventID: click_home_hi, toUid: "\(uid)")
            kLet_netTitle.currentIn(eventID: kLet_succeedLikeName, toUid: "\(uid)")
        }
    }

    //: @objc private func likeBtnClick() {
    @objc private func likeAddSteamerTo() {
        // 埋点
        //: uploadRecord.uploadRecordEvent(eventID: click_home_like, toUid: "\(self.currenModel.uid)")
        kLet_netTitle.currentIn(eventID: kLet_freeValue, toUid: "\(self.currenModel.uid)")
        //: if isShowSubscre {
        if isShowSubscre {
            //: cardView.restoreCellLocation()
            cardView.carte()
            //: EnvelopeSinceAdministratorThen.share.func__pushToSubscribeAlert(appendParams: "&type=0")
            EnvelopeSinceAdministratorThen.share.dismissBy(appendParams: (String(str_normalName.suffix(7))))
            //: return
            return
        }
        //: likeReq()
        isDismiss()
//        if !cardView.isUserInteractionEnabled && cellItems.count == 1 {
//            self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
//            likeReq()
//            return
//        }
        //: cardView.removeTopCardViewFromSwipe(direction: .Right)
        cardView.anyEqualStart(direction: .Right)
    }
}

/// 初始化模型数据
//: extension TalkingClubVC {
extension TextModelClubVc {
    //: func removeAllData() {
    func eraseForData() {
        //: self.cellItems.removeAll()
        self.cellItems.removeAll()
    }

    //: func beginRequestData() {
    func occupationCollection() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = PtolemaicSystemThen()
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false
        //: reqModel.requestPath = "mf/business/list"
        reqModel.requestPath = (String(str_requestText))
        //: reqModel.requestType = .GET
        reqModel.requestType = .GET
        //: reqModel.params = ["tab": 1,
        reqModel.params = [String(bytes: str_videoRowData.reversed(), encoding: .utf8)!: 1,
                           //: "page": 0,
                           String(bytes: str_humanData.map{makeElseInput(view: $0)}, encoding: .utf8)!: 0,
                           //: "minAge": 18,
                           String(bytes: str_topHiddenData.reversed(), encoding: .utf8)!: 18,
                           //: "maxAge": 80,
                           String(bytes: str_piLogRawName.map{dataConverter(share: $0)}, encoding: .utf8)!: 80,
                           //: "datingVideo": 0]
                           String(bytes: str_tingMaxText.map{aDelay(title: $0)}, encoding: .utf8)!: 0]
        //: ProgressHUD.show()
        TotalerpretationProgressHUD.alienation()
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_reasonText.priceSub(model: reqModel) { succeed, result, errorModel in
            //: ProgressHUD.dismiss()
            TotalerpretationProgressHUD.countimateEqualDismiss()
            //: guard succeed == true else {
            guard succeed == true else {
                //: if errorModel?.errorCode == 10889 {
                if errorModel?.errorCode == 10889 { // 卡片额度用完
                    //: let json = JSON(result ?? {})
                    let json = JSON(result ?? {})
                    //: self.swipedFinishView.show(limitNum: json["limitNum"].int, expire: json["expire"].int)
                    self.swipedFinishView.sizeShowExpire(limitNum: json[(str_bindViewName.lowercased() + String(str_jumpData))].int, expire: json[(str_barContent.replacingOccurrences(of: "position", with: "x"))].int)
                    //: } else {
                } else {
                    //: if errorModel?.errorMsg.isEmpty == false {
                    if errorModel?.errorMsg.isEmpty == false {
                        //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                        self.talkTask(showMsg: errorModel?.errorMsg ?? "")
                    }
                    //: self.addEmptyView()
                    self.petText()
                }
                //: return
                return
            }
            //: let resultArr = result as! [Dictionary<String, Any>]
            let resultArr = result as! [[String: Any]]
            //: for dict in resultArr {
            for dict in resultArr {
                //: if let model = SocialUserListModel.deserialize(from: dict as? Dictionary) {
                if let model = BillOfFareListModel.deserialize(from: dict as? Dictionary) {
                    //: self.cellItems.append(model)
                    self.cellItems.append(model)
                }
            }
            //: if self.cellItems.count > 0 {
            if self.cellItems.count > 0 {
                //: if resultArr.count > 0 {
                if resultArr.count > 0 {
//                    if self.cellItems.count == 1 {
//                        self.cardView.isUserInteractionEnabled = false
//                    }else {
//                        self.cardView.isUserInteractionEnabled = true
//                    }
                    //: self.cardView.reloadData()
                    self.cardView.markQueryed()
                    //: }else {
                } else {
                    //: self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
                    self.talkTask(showMsg: String(bytes: str_bubbleName.reversed(), encoding: .utf8)!.localized)
                }
                //: } else {
            } else {
                //: self.swipedFinishView.show(limitNum: nil, expire: nil)
                self.swipedFinishView.sizeShowExpire(limitNum: nil, expire: nil)
            }
        }
    }

    //: private func addEmptyView() {
    private func petText() {
        //: self.view.removeAllSubviews()
        self.view.removeAllSubviews()
        //: self.view.addSubview(self.emptyV)
        self.view.addSubview(self.emptyV)
        //: self.emptyV.snp.makeConstraints { make in
        self.emptyV.snp.makeConstraints { make in
            //: make.top.equalToSuperview().offset(200)
            make.top.equalToSuperview().offset(200)
            //: make.leading.trailing.bottom.equalToSuperview()
            make.leading.trailing.bottom.equalToSuperview()
        }
    }

    //: private func disLikeReq() {
    private func adOn() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = PtolemaicSystemThen()
        //: reqModel.requestPath = "mf/newFeature/dislike"
        reqModel.requestPath = (String(str_contentSearchName.suffix(5)) + "wFea" + str_sectionName.replacingOccurrences(of: "text", with: "ur") + String(str_nameTopData.prefix(4)) + "like")
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.params = ["uid": self.currenModel.uid]
        reqModel.params = [String(bytes: str_makeData.map{$0^141}, encoding: .utf8)!: self.currenModel.uid]
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false

        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_reasonText.priceSub(model: reqModel) { _, result, errorModel in
            //: if errorModel?.errorMsg.isEmpty == false {
            if errorModel?.errorMsg.isEmpty == false {
                //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                self.talkTask(showMsg: errorModel?.errorMsg ?? "")
            }
            //: if errorModel?.errorCode == 10888 {
            if errorModel?.errorCode == 10888 {
                //: EnvelopeSinceAdministratorThen.share.func__pushToSubscribeAlert(appendParams: "&type=0")
                EnvelopeSinceAdministratorThen.share.dismissBy(appendParams: (String(str_normalName.suffix(7))))
                //: self.isShowSubscre = true
                self.isShowSubscre = true

                //: } else if errorModel?.errorCode == 10889 {
            } else if errorModel?.errorCode == 10889 { // 卡片额度用完
                //: let json = JSON(result ?? {})
                let json = JSON(result ?? {})
                //: self.swipedFinishView.show(limitNum: json["limitNum"].int, expire: json["expire"].int)
                self.swipedFinishView.sizeShowExpire(limitNum: json[(str_bindViewName.lowercased() + String(str_jumpData))].int, expire: json[(str_barContent.replacingOccurrences(of: "position", with: "x"))].int)
            }
        }
    }

    //: private func likeReq() {
    private func isDismiss() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = PtolemaicSystemThen()
        //: reqModel.requestPath = "mf/newFeature/like"
        reqModel.requestPath = (String(str_voiceValue.prefix(4)) + "ewFe" + String(str_touchArrayValue.suffix(8)) + str_tagName.lowercased())
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.params = ["uid": self.currenModel.uid]
        reqModel.params = [String(bytes: str_makeData.map{$0^141}, encoding: .utf8)!: self.currenModel.uid]
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false

        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_reasonText.priceSub(model: reqModel) { _, result, errorModel in
            //: if errorModel?.errorMsg.isEmpty == false {
            if errorModel?.errorMsg.isEmpty == false {
                //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                self.talkTask(showMsg: errorModel?.errorMsg ?? "")
            }
            //: if errorModel?.errorCode == 10888 {
            if errorModel?.errorCode == 10888 {
                //: EnvelopeSinceAdministratorThen.share.func__pushToSubscribeAlert(appendParams: "&type=0")
                EnvelopeSinceAdministratorThen.share.dismissBy(appendParams: (String(str_normalName.suffix(7))))
                //: self.isShowSubscre = true
                self.isShowSubscre = true

                //: } else if errorModel?.errorCode == 10889 {
            } else if errorModel?.errorCode == 10889 { // 卡片额度用完
                //: let json = JSON(result ?? {})
                let json = JSON(result ?? {})
                //: self.swipedFinishView.show(limitNum: json["limitNum"].intValue, expire: json["expire"].intValue)
                self.swipedFinishView.sizeShowExpire(limitNum: json[(str_bindViewName.lowercased() + String(str_jumpData))].intValue, expire: json[(str_barContent.replacingOccurrences(of: "position", with: "x"))].intValue)
            }
        }
    }

    /// 刷新个人资料接口
    //: @objc private func func__requestUserInfo() {
    @objc private func safetyMarginInfo() {
        //: AppManagerRequest.func__requestUserInfo { succeed, result, errorModel in
        SubjectMatterThen.rubric { _, _, _ in
            //: self.isShowSubscre = false
            self.isShowSubscre = false
            //: self.beginRequestData()
            self.occupationCollection()
        }
    }
}

//: extension TalkingClubVC: TalkingClubCardViewDataSource, TalkingClubCardViewDelegate {
extension TextModelClubVc: StoryDataSource, ErrorViewDelegate {
    //: func numberOfCountInCardView(cardView: TalkingClubCardView) -> Int {
    func noBirdSEyeViewWith(cardView _: TerraceThen) -> Int {
        //: return cellItems.count
        return cellItems.count
    }

    //: func cardViewCellForRowAtIndex(cardView: TalkingClubCardView, index: Int) -> TalkingClubCardViewCell {
    func listCell(cardView: TerraceThen, index: Int) -> TenantView {
        //: let cell = cardView.dequeueReusableCellWithIdentifier(identifier: CardCellId) as? TalkingClubCardItemCell
        let cell = cardView.dataConverterView(identifier: CardCellId) as? PanoplyThen
        //: let model = cellItems[index]
        let model = cellItems[index]
        //: cell?.setCellData(model: model)
        cell?.tagCount(model: model)
        //: if index == 0 {
        if index == 0 {
            //: self.currenModel = model
            self.currenModel = model
            //: self.currenCell = cell
            self.currenCell = cell
        }

        //: cell?.layer.cornerRadius = 10.0
        cell?.layer.cornerRadius = 10.0
        //: cell?.layer.masksToBounds = true
        cell?.layer.masksToBounds = true
        //: return cell!
        return cell!
    }

    //: func CellForRowAtIndexModel(index: Int) -> SocialUserListModel {
    func halfMastMake(index: Int) -> BillOfFareListModel {
        //: let model = cellItems[index]
        let model = cellItems[index]
        //: return model
        return model
    }

    //: func didRemoveLastCell(cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int) {
    func appMoment(cardViewCell _: TenantView, forRowAtIndex _: Int) {
        /// 数据查看完
        //: self.removeAllData()
        self.eraseForData()
//        cardView.isUserInteractionEnabled = false
        //: beginRequestData()
        occupationCollection()
    }

    //: func didRemoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int, direction: Int, isGesture: Bool) {
    func tillFinish(cardView _: TerraceThen, cardViewCell _: TenantView, forRowAtIndex: Int, direction: Int, isGesture: Bool) {
        //: if isGesture {
        if isGesture {
            //: if direction == 1 {
            if direction == 1 {
                // 埋点
                //: uploadRecord.uploadRecordEvent(eventID: click_home_dislike, toUid: "\(self.currenModel.uid)")
                kLet_netTitle.currentIn(eventID: kLet_turnData, toUid: "\(self.currenModel.uid)")
                //: disLikeReq()
                adOn()
                //: }else {
            } else {
                // 埋点
                //: uploadRecord.uploadRecordEvent(eventID: click_home_like, toUid: "\(self.currenModel.uid)")
                kLet_netTitle.currentIn(eventID: kLet_freeValue, toUid: "\(self.currenModel.uid)")
                //: likeReq()
                isDismiss()
            }
        }
        //: cellItems.remove(at: 0)
        cellItems.remove(at: 0)
        //: if let model = cellItems.first {
        if let model = cellItems.first {
            //: self.currenModel = model
            self.currenModel = model
        }

        /// 最后一条
//        if cellItems.count == 1 {
//            cardView.isUserInteractionEnabled = false
//            beginRequestData()
//        }
        //: printLog(message:"didRemoveCell forRowAtIndex = \(forRowAtIndex)")
        printLog(message: (String(str_withoutName.prefix(4)) + "emove" + String(str_appPicText.suffix(7)) + String(str_tagValue.prefix(4)) + "AtInd" + String(str_attributeValue.prefix(5))) + "\(forRowAtIndex)")
    }

    //: func didDisplayCell(cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int) {
    func marginOfSafetyIndex(cardViewCell _: TenantView, forRowAtIndex _: Int) {}

    //: func didMoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell, forMovePoint: CGPoint) {
    func compartmentPoint(cardView _: TerraceThen, cardViewCell _: TenantView, forMovePoint _: CGPoint) {}

    //: func beginMoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell) {
    func atMark(cardView _: TerraceThen, cardViewCell _: TenantView) {
//        if isShowSubscre {
//            cardView.isUserInteractionEnabled = false
//        }
    }
}

//: extension TalkingClubVC {
extension TextModelClubVc {
    //: private func setupView() {
    private func videoWill() {
        //: self.view.backgroundColor = .clear
        self.view.backgroundColor = .clear
        //: self.view.removeAllSubviews()
        self.view.removeAllSubviews()
        //: self.view.addSubview(cardView)
        self.view.addSubview(cardView)
        //: self.view.addSubview(disLikeBtn)
        self.view.addSubview(disLikeBtn)
        //: self.view.addSubview(hiBtn)
        self.view.addSubview(hiBtn)
        //: self.view.addSubview(likeBtn)
        self.view.addSubview(likeBtn)

        //: hiBtn.snp.makeConstraints { make in
        hiBtn.snp.makeConstraints { make in
            //: make.top.equalTo(cardView.snp.bottom).offset(28)
            make.top.equalTo(cardView.snp.bottom).offset(28)
            //: make.centerX.equalTo(self.view)
            make.centerX.equalTo(self.view)
            //: make.size.equalTo(61)
            make.size.equalTo(61)
        }

        //: disLikeBtn.snp.makeConstraints { make in
        disLikeBtn.snp.makeConstraints { make in
            //: make.size.top.equalTo(hiBtn)
            make.size.top.equalTo(hiBtn)
            //: make.trailing.equalTo(hiBtn.snp.leading).offset(-48)
            make.trailing.equalTo(hiBtn.snp.leading).offset(-48)
        }

        //: likeBtn.snp.makeConstraints { make in
        likeBtn.snp.makeConstraints { make in
            //: make.size.top.equalTo(hiBtn)
            make.size.top.equalTo(hiBtn)
            //: make.leading.equalTo(hiBtn.snp.trailing).offset(48)
            make.leading.equalTo(hiBtn.snp.trailing).offset(48)
        }
    }

    /// 添加通知
    //: private func addNotifications() {
    private func doingeHalfNotifications() {
        //: NotificationCenter.default.addObserver(self,
        NotificationCenter.default.addObserver(self,
                                               //: selector: #selector(self.func__requestUserInfo),
                                               selector: #selector(self.safetyMarginInfo),
                                               //: name: APPLE_IAP_SUBSCRIBE_SUCCEED_NOTIFICATION,
                                               name: kLet_soundUserName,
                                               //: object: nil)
                                               object: nil)
    }
}
